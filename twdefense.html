é¦¬ä¸Šç‚ºä½ ç”¢ç”Ÿã€Œå¯ç›´æ¥ç”¨æ–¼é–‹ç™¼èˆ‡å±•ç¤ºã€çš„ index.htmlï¼ˆå« CSS èˆ‡ JSï¼‰ï¼Œç¬¦åˆä¸Šé¢ prompt çš„è¦æ ¼ï¼Œä¸€æª”åœ¨æ‰‹ã€å³å¯è¤‡è£½é–‹ç™¼ã€‚
æœ¬ç¯„ä¾‹æœƒæ¡ç”¨åŸç”Ÿ JavaScript + HTML5 Canvasï¼Œå…·å‚™èƒŒæ™¯åœ–ã€ç•ªè–¯å“¥çµ‚é»ã€ç†Šæ€ªå‹•ç•«ã€æŠ€èƒ½æŒ‰éˆ•ã€èƒ½é‡/è¡€é‡/æ³¢æ•¸UIã€ç°¡æ˜“æŠ€èƒ½æ”»æ“Šé‚è¼¯ã€å‹æ•—åˆ¤å®šèˆ‡å€¡è­°æ–‡æ¡ˆï¼Œæ–¹ä¾¿ä½ ç«‹å³äºŒæ¬¡é–‹ç™¼èˆ‡ç¾è¡“å‡ç´šã€‚

â¸»

ğŸ”— å°ˆæ¡ˆç›®éŒ„å»ºè­°
	â€¢	index.html
	â€¢	assets/map.pngï¼ˆå°ç£åœ°åœ–èƒŒæ™¯ï¼‰
	â€¢	assets/sweetpotato.pngï¼ˆç•ªè–¯å“¥ï¼‰
	â€¢	assets/bear_sprite.pngï¼ˆç†Šæ€ª4æ ¼è¡Œèµ°å‹•ç•«ï¼‰
	â€¢	assets/fireball.pngï¼ˆæŠ€èƒ½ç«çƒï¼‰
	â€¢	å¯å¾ŒçºŒè£œéŸ³æ•ˆ

æœ¬ç¯„ä¾‹é è¨­åœ–ç‰‡åœ¨ /assets/ï¼Œå¦‚æ²’åœ–ç‰‡å¯å…ˆç”¨ä»»æ„åœ–orå»èƒŒpngä½”ä½æ¸¬è©¦ã€‚

â¸»

â¬‡ï¸ å®Œæ•´ index.html (å« CSS + JS)

<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>è•ƒè–¯å“¥å®ˆè¡›æˆ°ï¼šå°ç£å¤§ç½·å…å¡”é˜²éŠæˆ²</title>
  <style>
    body {
      background: #fff8e1;
      font-family: "Noto Sans TC", "Arial", sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
      user-select: none;
    }
    h1 { color: #d2691e; margin: 20px 0 5px 0; }
    #game-container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      margin-top: 10px;
    }
    #game-ui {
      margin-left: 20px;
      padding-top: 30px;
    }
    canvas {
      border: 3px solid #d2691e;
      background: #fffde7;
      border-radius: 10px;
      box-shadow: 0 0 12px #ffe08288;
      margin-top: 10px;
    }
    #status { margin: 20px 0 12px 0; font-size: 18px; }
    .btn-skill {
      font-size: 18px;
      margin: 8px;
      padding: 10px 18px;
      border-radius: 8px;
      border: 2px solid #ffa000;
      background: #ffe082;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn-skill:active {
      background: #ffd54f;
      border-color: #fb8c00;
    }
    #result-panel {
      display: none;
      position: fixed;
      left: 0; right: 0; top: 0; bottom: 0;
      background: #fffdeec0;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #result-box {
      background: #fff8e1;
      border: 2px solid #d2691e;
      border-radius: 14px;
      padding: 38px 36px;
      font-size: 24px;
      color: #b71c1c;
      box-shadow: 0 2px 30px #ffb30066;
    }
    #result-box button {
      margin-top: 22px;
      font-size: 22px;
      background: #ffd54f;
      border: 2px solid #ffb300;
      border-radius: 10px;
      padding: 10px 30px;
      color: #b71c1c;
      cursor: pointer;
    }
    #desc {
      margin: 0 auto 0.6em auto;
      width: 96vw; max-width: 700px;
      color: #4e2600;
      font-size: 17px;
      line-height: 1.5;
      border-radius: 9px;
      padding: 0.6em 1em 0.6em 1em;
      background: #fffbe5;
      box-shadow: 0 0 4px #ffd54f44;
    }
    @media (max-width: 900px) {
      #game-container { flex-direction: column; align-items: center; }
      #game-ui { margin-left: 0; padding-top: 12px; }
    }
  </style>
</head>
<body>
  <h1>è•ƒè–¯å“¥å®ˆè¡›æˆ°ï¼šå°ç£å¤§ç½·å…å¡”é˜²éŠæˆ²</h1>
  <div id="desc">
    <b>2025å°ç£å±æ©Ÿ</b>â€”â€”å…±è»è£¡æ‡‰å¤–åˆã€å‡è¨Šæ¯ã€è¼¿è«–åˆ†åŒ–æ­¥æ­¥é€²é€¼ã€‚å®ˆè­·ã€Œè•ƒè–¯å“¥ã€çš„æœªä¾†ï¼Œä½ æº–å‚™å¥½äº†å—ï¼Ÿ<br>
    <span style="color:#b71c1c;">è«‹å–„ç”¨æŠ€èƒ½æ“Šé€€ç†Šæ€ªï¼ˆå‡è¨Šæ¯/ç´…è»ï¼‰ï¼Œå®ˆä½æ°‘ä¸»ï¼Œå …æŒå…¬æ°‘è¡Œå‹•ï¼</span>
  </div>
  <div id="game-container">
    <canvas id="gameCanvas" width="660" height="440"></canvas>
    <div id="game-ui">
      <div id="status">
        <span>èƒ½é‡ <b id="energy">100</b></span> ï½œ 
        <span>è•ƒè–¯å“¥è¡€é‡ <b id="potatoHP">5</b></span> ï½œ 
        <span>æ³¢æ•¸ <b id="wave">1</b></span>
      </div>
      <div>
        <button class="btn-skill" id="btnVerify">ğŸ” æŸ¥è­‰æŠ€èƒ½</button>
        <button class="btn-skill" id="btnFireball">ğŸ”¥ ç«çƒæŠ€èƒ½</button>
      </div>
      <div style="margin-top:24px; font-size:16px;">
        <b>èªªæ˜ï¼š</b>é»æ“ŠæŠ€èƒ½å¾Œå†é»æ“Šç•«é¢<br>
        ã€ŒæŸ¥è­‰ã€å°å–®é«”æœ‰æ•ˆï¼Œã€Œç«çƒã€å¯æ“Šä¸­å¤šéš»ã€‚
      </div>
    </div>
  </div>
  <div id="result-panel">
    <div id="result-box"></div>
  </div>
  <script>
    // === è³‡æºè·¯å¾‘è¨­å®š ===
    const ASSET = {
      map: 'assets/map.png',
      sweetpotato: 'assets/sweetpotato.png',
      bear: 'assets/bear_sprite.png',
      fireball: 'assets/fireball.png'
    };

    // === Canvas ===
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // === åœ–ç‰‡è¼‰å…¥ ===
    let img = {};
    let loaded = 0, toLoad = Object.keys(ASSET).length;
    for (let k in ASSET) {
      img[k] = new window.Image();
      img[k].src = ASSET[k];
      img[k].onload = ()=>{ loaded++; if(loaded==toLoad) requestAnimationFrame(gameLoop);}
      img[k].onerror = ()=>{ loaded++; if(loaded==toLoad) requestAnimationFrame(gameLoop);}
    }

    // === éŠæˆ²è³‡æ–™ ===
    let potatoHP = 5, energy = 100, wave = 1, running = true;
    let monsters = [], skills = [];
    let nextSpawn = 0, spawnIdx = 0;
    let selectedSkill = null;
    let cooldown = { verify:0, fireball:0 };
    let waveList = [
      [ {type:'fake', n:5}, {type:'psych', n:2} ],
      [ {type:'fake', n:8}, {type:'psych', n:3}, {type:'spy', n:1} ],
      [ {type:'fake', n:10}, {type:'psych', n:5}, {type:'spy', n:2} ],
      [ {type:'fake', n:10}, {type:'psych', n:8}, {type:'spy', n:4} ],
      [ {type:'fake', n:15}, {type:'psych', n:8}, {type:'spy', n:6} ],
    ];
    let curWaveMon = [], waveMonsterSum = 0;
    let isSpawning = false, spawnTimer = 0;
    let resultPanel = document.getElementById("result-panel");
    let resultBox = document.getElementById("result-box");

    // === æ€ªç‰©é¡å‹ ===
    const MONSTER_TYPES = {
      fake: {name:"å‡è¨Šæ¯å…µ",speed:1.5,hp:28,reward:10,frame:[0,1],frameDead:3,type:'fast'},
      psych: {name:"å¿ƒç†æˆ°å£«",speed:1.1,hp:50,reward:18,frame:[0,1],frameDead:3,type:'mid'},
      spy: {name:"æ»²é€å¹¹éƒ¨",speed:0.88,hp:90,reward:30,frame:[0,1],frameDead:3,type:'tank'}
    };

    // === æŠ€èƒ½ ===
    const SKILLS = {
      verify: { name:"æŸ¥è­‰", icon:"ğŸ”", cooldown:1700, cost:15, radius:28, effect:"å°å–®é«”å‚·å®³", dmg:32, key:'verify' },
      fireball: { name:"ç«çƒ", icon:"ğŸ”¥", cooldown:3300, cost:35, radius:52, effect:"å°ç¯„åœå‚·å®³", dmg:24, key:'fireball' }
    };

    // === æ›²ç·šè·¯å¾‘ï¼ˆä»¥Arrayä½œç°¡æ˜“Splineï¼‰ ===
    let path = [
      {x:30,y:390},{x:130,y:270},{x:240,y:270},{x:380,y:160},{x:510,y:210},{x:610,y:240},{x:615,y:380}
    ];

    // === å¹«åŠ©è·¯å¾‘æ’å€¼ï¼ˆt: 0~1ï¼‰ ===
    function getPathPoint(t) {
      let N = path.length-1, tt = t*N;
      let idx = Math.floor(tt);
      let r = tt-idx;
      if(idx>=N) return {...path[N]};
      let p0 = path[idx], p1 = path[idx+1];
      return { x: p0.x + (p1.x-p0.x)*r, y: p0.y + (p1.y-p0.y)*r };
    }

    // === æ€ªç‰©ç”Ÿæˆ ===
    function startWave() {
      let waveSet = waveList[(wave-1)%waveList.length];
      curWaveMon = [];
      waveSet.forEach(set=>{
        for(let i=0;i<set.n;i++) curWaveMon.push(set.type);
      });
      waveMonsterSum = curWaveMon.length;
      spawnIdx = 0; isSpawning = true; spawnTimer = 0;
    }
    function spawnMonster() {
      if(spawnIdx<curWaveMon.length) {
        let type = curWaveMon[spawnIdx++];
        let mType = MONSTER_TYPES[type];
        monsters.push({
          type, ...mType, t:0, hp:mType.hp, dead:false, frame:0, anim:0
        });
      }
      if(spawnIdx>=curWaveMon.length) isSpawning = false;
    }

    // === æŠ€èƒ½é‡‹æ”¾ ===
    document.getElementById("btnVerify").onclick = ()=>{
      if(cooldown.verify>0||energy<SKILLS.verify.cost||!running) return;
      selectedSkill='verify';
    };
    document.getElementById("btnFireball").onclick = ()=>{
      if(cooldown.fireball>0||energy<SKILLS.fireball.cost||!running) return;
      selectedSkill='fireball';
    };
    canvas.addEventListener('click', e=>{
      if(!selectedSkill||!running) return;
      let rect = canvas.getBoundingClientRect();
      let x = e.clientX-rect.left, y = e.clientY-rect.top;
      if(selectedSkill=='verify') {
        // å–®é«”æŠ€èƒ½
        let tgt=null, minD=1e9, radius=SKILLS.verify.radius;
        monsters.forEach(m=>{
          let dx=x-getPathPoint(m.t).x, dy=y-getPathPoint(m.t).y;
          let d=Math.sqrt(dx*dx+dy*dy);
          if(!m.dead && d<radius && d<minD){ tgt=m; minD=d; }
        });
        if(tgt){
          tgt.hp-=SKILLS.verify.dmg;
          energy-=SKILLS.verify.cost;
          cooldown.verify=SKILLS.verify.cooldown;
        }
      } else if(selectedSkill=='fireball') {
        // ç¯„åœæŠ€èƒ½
        monsters.forEach(m=>{
          let pt=getPathPoint(m.t);
          let d=Math.hypot(x-pt.x,y-pt.y);
          if(!m.dead&&d<SKILLS.fireball.radius)
            m.hp-=SKILLS.fireball.dmg;
        });
        skills.push({x,y,frame:0,life:16});
        energy-=SKILLS.fireball.cost;
        cooldown.fireball=SKILLS.fireball.cooldown;
      }
      selectedSkill=null;
      updateUI();
    });

    // === UIæ›´æ–° ===
    function updateUI() {
      document.getElementById("energy").textContent = energy;
      document.getElementById("potatoHP").textContent = potatoHP;
      document.getElementById("wave").textContent = wave;
    }

    // === éŠæˆ²ä¸»å¾ªç’° ===
    function gameLoop(ts) {
      // ç‹€æ…‹UI
      updateUI();
      // ç¹ªèƒŒæ™¯
      ctx.clearRect(0,0,canvas.width,canvas.height);
      if(img.map) ctx.drawImage(img.map,0,0,660,440);

      // ç¹ªè·¯å¾‘
      ctx.save();
      ctx.strokeStyle="#6d4c00";
      ctx.lineWidth=10;
      ctx.beginPath();
      for(let i=0;i<path.length;i++){
        let p=path[i];
        if(i==0) ctx.moveTo(p.x,p.y);
        else ctx.lineTo(p.x,p.y);
      }
      ctx.stroke();
      ctx.restore();

      // ç•ªè–¯å“¥
      if(img.sweetpotato){
        ctx.drawImage(img.sweetpotato,590,370,55,55);
      }else{
        ctx.beginPath();
        ctx.arc(617,398,29,0,2*Math.PI);
        ctx.fillStyle="#ffb347";
        ctx.fill();
      }

      // æŠ€èƒ½ç‰¹æ•ˆ
      for(let i=skills.length-1;i>=0;i--){
        let f=skills[i];
        if(img.fireball) ctx.drawImage(img.fireball,f.x-38,f.y-38,76,76);
        ctx.globalAlpha = 0.5*f.life/16;
        ctx.beginPath();
        ctx.arc(f.x,f.y,48*(f.life/16),0,2*Math.PI);
        ctx.fillStyle="#ff6f00";
        ctx.fill();
        ctx.globalAlpha=1.0;
        f.life--;
        if(f.life<=0) skills.splice(i,1);
      }

      // æ€ªç‰©
      for(let i=monsters.length-1;i>=0;i--){
        let m=monsters[i];
        // ç§»å‹•
        if(!m.dead) m.t += m.speed/800;
        if(m.t>1 && !m.dead){
          // åˆ°é”çµ‚é»
          potatoHP--; m.dead=true;
          if(potatoHP<=0){ running=false; showResult(false); return;}
        }
        // å‹•ç•«
        if(!m.dead) m.anim+=0.13;
        let frame = m.dead?m.frameDead: m.frame[Math.floor(m.anim)%m.frame.length];
        let pt = getPathPoint(Math.min(m.t,1));
        // ç•«sprite
        if(img.bear){
          ctx.drawImage(img.bear,frame*64,0,64,64,pt.x-25,pt.y-30,50,50);
        }else{
          ctx.beginPath();
          ctx.arc(pt.x,pt.y,18,0,2*Math.PI);
          ctx.fillStyle="#d32f2f";
          ctx.fill();
        }
        // è¡€æ¢
        ctx.fillStyle="#fff";
        ctx.fillRect(pt.x-17,pt.y-24,36,7);
        ctx.fillStyle="#4caf50";
        ctx.fillRect(pt.x-17,pt.y-24,36*m.hp/mhp(m),7);
        ctx.strokeStyle="#222";ctx.strokeRect(pt.x-17,pt.y-24,36,7);

        // æ­»äº¡è™•ç†
        if(m.hp<=0 && !m.dead){
          m.dead=true; m.anim=0;
          setTimeout(()=>{monsters.splice(i,1)},500);
          energy+=m.reward;
        }
      }

      // æŠ€èƒ½å†·å»
      for(let k in cooldown){
        if(cooldown[k]>0) cooldown[k]-=16;
        if(cooldown[k]<0) cooldown[k]=0;
      }

      // æ€ªç‰©ç”Ÿæˆ
      if(isSpawning){
        spawnTimer++;
        if(spawnTimer%33==0){
          spawnMonster();
        }
      }
      // æ–°æ³¢é–‹å§‹
      if(monsters.length==0 && !isSpawning && running){
        if(wave>=waveList.length){ running=false; showResult(true); return;}
        wave++;
        setTimeout(startWave,1100);
      }
      if(running) requestAnimationFrame(gameLoop);
    }
    function mhp(m){ return MONSTER_TYPES[m.type].hp; }

    // === çµæœé¡¯ç¤º ===
    function showResult(win){
      resultPanel.style.display = "flex";
      let html = win
        ? `<div>ä½ æˆåŠŸå®ˆè­·å°ç£ï¼<br>æŠ•ä¸‹<strong style="color:#b71c1c;">åŒæ„ç½·å…ç¥¨</strong>ï¼ŒæŒçºŒå…¬æ°‘è¡Œå‹•ï¼<br><br>
            <button onclick="window.open('https://www.cec.gov.tw/', '_blank')">å‰å¾€ç½·å…è³‡è¨Š</button>
           </div>`
        : `<div>è•ƒè–¯å“¥æ·ªé™·ï¼Œå°ç£å±æ©ŸåŠ æ·±ã€‚<br>ä¸‹æ¬¡ä¸€å®šè¦è¡Œå‹•ï¼<br><br>
            <button onclick="location.reload()">å†ä¾†ä¸€æ¬¡</button>
           </div>`;
      resultBox.inner
          resultBox.innerHTML = html;
    }

    // === åˆå§‹åŒ–å•Ÿå‹• ===
    function gameInit() {
      // é‡è¨­ç‹€æ…‹
      potatoHP = 5;
      energy = 100;
      wave = 1;
      running = true;
      monsters = [];
      skills = [];
      cooldown = { verify:0, fireball:0 };
      updateUI();
      resultPanel.style.display = "none";
      startWave();
      requestAnimationFrame(gameLoop);
    }

    // === é¦–æ¬¡è‡ªå‹•å•Ÿå‹•ï¼ˆåœ–æª”è¼‰å®Œæ‰å•Ÿå‹•ï¼‰å·²åœ¨img onload
    // è‹¥éœ€é‡ç©æŒ‰éˆ•å¯åŠ å¦‚ä¸‹äº‹ä»¶
    resultPanel.addEventListener('click', function(e){
      if(e.target===resultPanel) gameInit();
    });

    // === é è¨­è¼‰å…¥æ™‚é¡¯ç¤º loading
    ctx.font = "32px sans-serif";
    ctx.fillStyle = "#d2691e";
    ctx.fillText("è¼‰å…¥éŠæˆ²ä¸­â€¦", 220, 210);

    // === å¯é¸ï¼šæ‰‹æ©Ÿæ”¯æ´ã€é¡è‰²æé†’ ===
    if(/Mobi|Android/i.test(navigator.userAgent)){
      document.getElementById("desc").innerHTML +=
        "<br><b style='color:#b71c1c;'>æ‰‹æ©Ÿç”¨æˆ¶ï¼š</b>å»ºè­°æ©«å‘è§€çœ‹ï¼Œé«”é©—æ›´ä½³ï¼";
    }

    // === å‹•ç•«å°ç´°ç¯€ï¼ˆé»é¸é¸ä¸­æŠ€èƒ½æŒ‰éˆ•è®Šè‰²ï¼‰===
    let skillBtns = [document.getElementById("btnVerify"), document.getElementById("btnFireball")];
    setInterval(()=>{
      skillBtns.forEach((btn,i)=>{
        btn.style.background = selectedSkill && ((selectedSkill=='verify'&&i==0)||(selectedSkill=='fireball'&&i==1))
          ? "#ffecb3" : "#ffe082";
      });
    },80);
  </script>
</body>
</html>